## 일반적인 웹 애플리케이션 계층 구조

![image](https://user-images.githubusercontent.com/65094518/145970641-5c3c6b4d-037b-4d2f-8060-40074aaf6b8f.png)

#### 컨트롤러: 웹 MVC의 컨트롤러 역할, api 만들기

- Spring MVC 객체를 말한다.
- 프론트 컨트롤러(DispatcherServlet), 컨트롤러, 뷰, 모델이 포함된다. 







#### 서비스: 핵심 비지니스 로직 구현

- 실제 비지니스 로직을 수행하는 컴포넌트
- 컨트롤러(presentation layer)에서 요청을 보내면 DAO(data access layer)를 이용해 실제로 비지니스 로직을 수행한다.
- 보통 하나의 비지니스 로직은 하나의 트랜잭션으로 동작(ACID 특징 가짐)







#### 리포지토리: 데이터베이스에 접근, 도메인 객체를 DB에 저장하고 관리

레포지토리 계층은 왜있는건가요?

- 각 계층 별로 역할을 '분담' 해놓았다고 생각하시면 됩니다.

  DB와 관련된 로직과 처리가 **서비스 계층**에 포함되어 있다면 기존 **서비스 계층**에서 하던 역할과 DB와 관련된 역할을 다 처리하게 되어 문제가 발생했을 때 혹은 새로운 로직이 추가 되었을 때 코드 구현과 관리가 힘들어 집니다.

  반면 역할을 분리해 놓으면 새로 추가 되거나 문제가 발생한 부분을 **'명확히'** 짚어내어 해당 계층의 코드 구현 부분을 살펴볼 수 있습니다.

  쉽게 생각하면 자바를 처음 공부할 때 main 함수에 모든 로직을 작성하다 '메서드' 혹은 '함수'에 대해 배울 때 함수의 유용함과 역할을 생각해보시면 될 것 같습니다.





#### 도메인: 비지니스 도메인 객체 ,예)회원, 주문, 쿠폰 등등 주로 데이터베이스에 저장하고 관리됨

- DB에 값을 저장하거나 가져오기 위해 JDBC, Mybatis, JPA 등을 사용해 구현한 DAO







## 클래스 의존관계

![image](https://user-images.githubusercontent.com/65094518/145971135-1631e994-5d71-425c-98e1-119e88bba0f0.png)



`MemberRepository` 회원을 저장하는 것은 `interface`로 만듭니다.

**구현체**는 인터페이스를 구현한 클래스를 말합니다.

```java
interface MemberRepository
class MemoryMemberRepository implements MemberRepository
```

위와 같은 인터페이스와 클래스가 있다면 `MemoryMemberRepository`는 `MemberRepository` 인터페이스를 구현한 구현체입니다.



구현체를 메모리에 넣어서 쉽게 넣었다가 뺄 수 있는 구현체를 만듭니다.

아직 데이터 저장소가 선정되지 않아서, 우선 인터페이스로 구현 클래스를 변경할 수 있도록 설계합니다.
나중에 데이터 저장소(RDB, NoSQL 등) 정해졌을 때 구현체를 갈아 끼우려면`interface`만 수정하면 됩니다.