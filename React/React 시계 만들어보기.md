## React ì‹œê³„ ë§Œë“¤ì–´ë³´ê¸°

```react
  const [time, setTime] = useState(moment());

  useEffect(() => {
    const id = setInterval(() => {
      setTime(moment());
    }, 1000);
    return () => clearInterval(id);
  }, []);
  
  return ( <div>ë‚¨ì€ ì‹œê°„:{time.format("HH-mm-ss")}</div> )
```

useEffect(ì²« ë²ˆì§¸, ë‘ ë²ˆì§¸)ë¥¼ ì‚¬ìš©í•˜ë©´  ë‘ ë²ˆì¬ ë§¤ê°œë³€ìˆ˜ê°€ ë³€í•  ë•Œë§ˆë‹¤ useEffectê°€ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤.

ì•„ë¬´ê²ƒë„ ì•ˆë„£ì–´ì¤¬ìœ¼ë‹ˆ í”„ë¡œê·¸ë¨ì´ ì‹¤í–‰ë  ë•Œ í•œë²ˆë§Œ ì‹¤í–‰ë©ë‹ˆë‹¤.

ì—¬ê¸°ì„œ setIntervalê³¼ clearIntervalì„ ì˜ ëª¨ë¥´ê² ìŠµë‹ˆë‹¤.

JavaScript ì—ì„œ setInterval í•¨ìˆ˜ëŠ” ê¸°ì¤€ ê°„ê²©ì„ ë‘ê³  ì£¼ê¸°ì ìœ¼ë¡œ ì´ë²¤íŠ¸ë¥¼ ë°œìƒ ì‹œí‚¤ê³  ì‹¶ì„ ë•Œ ì‚¬ìš©í•©ë‹ˆë‹¤.

ê·¸ë¦¬ê³  ì¤‘ì§€í•˜ê³  ì‹¶ì„ ë•ŒëŠ” clearInterval í•¨ìˆ˜ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

clearInterval í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜ëŠ” setInterval í•¨ìˆ˜ê°€ ë¦¬í„´í•´ì£¼ëŠ” ê°’ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ë¦¬í„´ë°›ì€ timer ê°’ì„ ë§¤ê°œë³€ìˆ˜ë¡œ ë³´ë‚´ì£¼ë©´ ë©ë‹ˆë‹¤.



ì¼ë‹¨ 

```react
  const [time, setTime] = useState(moment());

    const id = setInterval(() => {
    	setTime(moment());
    }, 1000);
  
  return ( <div>ë‚¨ì€ ì‹œê°„:{time.format("HH-mm-ss")}</div> )
```

ì´ë ‡ê²Œ í•´ë„ ì‹¤í–‰ì´ ë˜ê¸´ ë©ë‹ˆë‹¤. í•˜ì§€ë§Œ useState íŠ¹ì„±ìƒ set()ì´ ë™ì‘í•˜ë©´ í™”ë©´ ì „ì²´ë¥¼ ë¦¬ëœë”ë§ í•˜ëŠ” ê·œì¹™ì´ ìˆìŠµë‹ˆë‹¤. ê·¸ëŸ¼ timeë§Œ ë¦¬ëœë”ë§ì´ ë˜ëŠ”ê²Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ê±°ê¹Œì§€ ë¦¬ëœë”ë§ì´ ë˜ë‹ˆ ì„±ëŠ¥ì´ ì €í•˜ë  ê²ƒ ì…ë‹ˆë‹¤.

ì„ì˜ì˜ ë³€ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ `setInterval()`ì„ ì €ì¥í•´ë‘ê³  `useEffect()`ê°€ ì´ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ë„ë¡ í•˜ë©´..? ì—­ì‹œë‚˜ ë Œë”ë§ ë  ë•Œë§ˆë‹¤ ìƒˆë¡œìš´ `setInterval()`ì„ ë§Œë“œëŠ” ê±´ ë§ˆì°¬ê°€ì§€
ğŸ‘‰ `useEffect()`ë¥¼ ì‚¬ìš©í•´ì„œ ì²˜ìŒ ë§ˆìš´íŠ¸ë˜ì—ˆì„ ë•Œ í•œ ë²ˆë§Œ `setInterval()`ì„ ìƒì„±í•˜ë„ë¡ í•œë‹¤.

`useEffect`ì— ì „ë‹¬ëœ í•¨ìˆ˜ëŠ” í™”ë©´ì— ë Œë”ë§ì´ ì™„ë£Œëœ í›„ì— ìˆ˜í–‰ë˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. 

ë§ˆìš´íŠ¸ = íŠ¸ë¦¬ì— ì‚½ì…ëœ ì§í›„



ê°€ì¥ ì–´ë ¤ìš´ ë¶€ë¶„ì´ `useEffect`ê°€ return í•˜ëŠ” ë¶€ë¶„ì´ì˜€ìŠµë‹ˆë‹¤. [ê³µì‹ ë¬¸ì„œ](https://ko.reactjs.org/docs/hooks-reference.html#useeffect)ë¥¼ ë³´ë‹ˆ effect ì´í›„ì— ì–´ë–»ê²Œ ì •ë¦¬(clean-up)í•  ê²ƒì¸ì§€ í‘œì‹œí•©ë‹ˆë‹¤.

 `useEffect`ë¡œ ì „ë‹¬ëœ í•¨ìˆ˜ëŠ” ì •ë¦¬(clean-up) í•¨ìˆ˜ë¥¼ ë°˜í™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì»´í¬ë„ŒíŠ¸ê°€ (ê·¸ëƒ¥ ì¼ë°˜ì ìœ¼ë¡œ ìˆ˜í–‰í•˜ëŠ” ê²ƒì²˜ëŸ¼) ì—¬ëŸ¬ ë²ˆ ë Œë”ë§ ëœë‹¤ë©´ **ë‹¤ìŒ effectê°€ ìˆ˜í–‰ë˜ê¸° ì „ì— ì´ì „ effectëŠ” ì •ë¦¬ë©ë‹ˆë‹¤**. 

ì¦‰ Intervalì´ í•œë²ˆë§Œ ìˆ˜í–‰ì´ ë˜ê³  í™”ë©´ì„ ë¦¬ëœë”ë§ í•˜ëŠ” setTime í•¨ìˆ˜ë¥¼ interval ì•ˆì— ë¼ì›Œë†“ì. ê·¸ë¦¬ê³  ì‹œê°„ ì¸¡ì •ì´ ëë‚˜ë©´ intervalì„ ì´ˆê¸°ê³¼ ì‹œì¼œë´…ì‹œë‹¤.



## ì»´í¬ë„ŒíŠ¸ ìƒëª…ì£¼ê¸°

DOMì— ë Œë”ë§ ë˜ëŠ” ê²ƒì„ ë§ˆìš´íŠ¸ë¼ê³  í•©ë‹ˆë‹¤

```
  componentDidMount() {
  	//ë§ˆìš´íŠ¸ ë  ë•Œ ìˆ˜í–‰ë˜ëŠ” ê²ƒ
  }

  componentWillUnmount() {
  	//ì–¸ë§ˆìš´íŠ¸ ë  ë•Œ ìˆ˜í–‰ë˜ëŠ” ê²ƒ
  }
```

```
useEffect(() => {
  (ì»´í¬ë„ŒíŠ¸ê°€ ìƒê¸¸ ë•Œ ìˆ˜í–‰ ì‘ì—…);
  return {
      (ì»´í¬ë„ŒíŠ¸ê°€ ì‚¬ë¼ì§ˆ ë•Œ ìˆ˜í–‰ ì‘ì—…);
  }
}, [ì˜ì¡´ì„±])

useEffect(() => {
    console.log('user ê°’ì´ ì„¤ì •ë¨');
    console.log(user);
    return() => {
    console.log('user ê°’ì´ ë°”ë€Œê¸° ì „');
    console.log(user);
  }
},[user])
```

ì°¸ê³  : https://handhand.tistory.com/32

https://velog.io/@chez_bono/%EB%A6%AC%EC%95%A1%ED%8A%B8-%ED%83%80%EC%9D%B4%EB%A8%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0